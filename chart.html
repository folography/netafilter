---
layout: default
chart: true
title: Netafilter - Chart
---

<h1>Neta ji, how do you do?</h1>

<h2>Educated and rich</h2>
<svg id='educated' style="height:400px;"></svg>

<h2>Party assets and liabilities</h2>
<svg id='assets' style="height:400px;"></svg>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>
  // Load data
  d3.csv("data/myneta-loksabha.csv", function(data) {

    var chartData = d3.nest()
      .key(function(d) {
        return d['ST_NAME'];
      })
      .sortKeys(d3.ascending)
      .entries(data);


    // Parse strings to integers http://learnjsdata.com/read_data.html
    data.forEach(function(d, i) {

      d['myneta Education Points'] = +d['myneta Education Points']
      d['myneta Total Assets'] = +d['myneta Total Assets'] / 10000000
      d['myneta Criminal Case'] = +d['myneta Criminal Case']

    });

    // DEBUG
    window.data = chartData;
    console.log(window.data);

  });

  // Create scatterChart
  // http://nvd3.org/examples/scatter.html
  nv.addGraph(function() {
    var chart = nv.models.scatterChart()
      .showDistY(true)
      .duration(100)
      .x(function(d) {
        return d['myneta Education Points'];
      })
      .y(function(d) {
        return d['myneta Total Assets'];
      })
      .pointSize(function(d) {
        return d['myneta Criminal Case'];
      })
      // .color(d3.scale.category20().range());
      .color(d3.scale.category20().range())
      .width(800);

    chart.tooltip.contentGenerator(function(obj) {
      console.log(obj);
      return '<h3>' + obj.point['myneta Candidate'] + '</h3><br><h4>' + obj.point['PC_NAME2'] + ', ' + obj.point['ST_NAME'] + '</h4><p>'+obj.point['myneta Criminal Case']+' criminal cases</p>'
    }).headerEnabled(true)

    //Axis settings
    chart.xAxis.axisLabel('Education (years)').tickFormat(d3.format('d'));
    chart.yAxis.axisLabel('Assets (Rs. crore)').tickFormat(d3.format('d'));


    d3.select('#educated')
      // .datum(myData)
      .datum(window.data)
      .call(chart);


    nv.utils.windowResize(chart.update);

    return chart;
  });
</script>
