!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.MapboxClient=t()}}(function(){var t;return function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e){"use strict";function n(t){r("number"==typeof t.latitude&&"number"==typeof t.longitude,"location must be an object with numeric latitude & longitude properties"),void 0!==t.zoom&&r("number"==typeof t.zoom,"zoom must be numeric")}var r=t("assert");e.exports=n},{assert:18}],2:[function(t,e){"use strict";e.exports=function(t){return window.atob(t)}},{}],3:[function(t,e){"use strict";var n=t("rest/interceptor"),r=n({success:function(t){var e=t&&t.request,n=e&&e.callback;return"function"==typeof n&&n(null,t.entity),t},error:function(t){var e=t&&t.request,n=e&&e.callback;if("function"==typeof n){var r=t.error||t.entity;"object"!=typeof r&&(r=new Error(r)),n(r)}return t}});e.exports=r},{"rest/interceptor":30}],4:[function(t,e){"use strict";var n=t("rest"),r=t("./callbackify");e.exports=function(e){return n.wrap(t("rest/interceptor/errorCode")).wrap(t("rest/interceptor/pathPrefix"),{prefix:e.endpoint}).wrap(t("rest/interceptor/mime"),{mime:"application/json"}).wrap(t("rest/interceptor/defaultRequest"),{params:{access_token:e.accessToken}}).wrap(t("rest/interceptor/template")).wrap(r)}},{"./callbackify":3,rest:26,"rest/interceptor/defaultRequest":31,"rest/interceptor/errorCode":32,"rest/interceptor/mime":33,"rest/interceptor/pathPrefix":34,"rest/interceptor/template":35}],5:[function(t,e){e.exports.DEFAULT_ENDPOINT="https://api.mapbox.com",e.exports.API_GEOCODER_FORWARD="/geocoding/v5/{dataset}/{query}.json{?proximity,country,types}",e.exports.API_GEOCODER_REVERSE="/geocoding/v5/{dataset}/{longitude},{latitude}.json{?types}",e.exports.API_DIRECTIONS="/v4/directions/{profile}/{encodedWaypoints}.json{?alternatives,instructions,geometry,steps}",e.exports.API_DISTANCE="/distances/v1/mapbox/{profile}",e.exports.API_SURFACE="/v4/surface/{mapid}.json{?layer,fields,points,geojson,interpolate,encoded_polyline}",e.exports.API_UPLOADS="/uploads/v1/{owner}",e.exports.API_UPLOAD="/uploads/v1/{owner}/{upload}",e.exports.API_UPLOAD_CREDENTIALS="/uploads/v1/{owner}/credentials",e.exports.API_MATCHING="/matching/v4/{profile}.json",e.exports.API_DATASET_DATASETS="/datasets/v1/{owner}",e.exports.API_DATASET_DATASET="/datasets/v1/{owner}/{dataset}",e.exports.API_DATASET_FEATURES="/datasets/v1/{owner}/{dataset}/features{?reverse,limit,start}",e.exports.API_DATASET_FEATURE="/datasets/v1/{owner}/{dataset}/features/{id}",e.exports.API_TILESTATS_STATISTICS="/tilestats/v1/{owner}/{tileset}",e.exports.API_TILESTATS_LAYER="/tilestats/v1/{owner}/{tileset}/{layer}",e.exports.API_TILESTATS_ATTRIBUTE="/tilestats/v1/{owner}/{tileset}/{layer}/{attribute}",e.exports.API_STATIC="/v4/{mapid}{+overlay}/{+xyz}/{width}x{height}{+retina}{.format}"},{}],6:[function(t,e){"use strict";function n(t){return t.map(function(t){return r(t),t.longitude+","+t.latitude}).join(";")}var r=t("./assert_location");e.exports=n},{"./assert_location":1}],7:[function(t,e){(function(n){"use strict";function r(t){var e=t.split(".")[1];if(!e)return null;if(e=e.replace(/-/g,"+").replace(/_/g,"/"),n.browser)e=e.replace(/=/g,"");else{var r=e.length%4;if(2===r&&(e+="=="),3===r&&(e+="="),1===r||r>3)return null}try{return JSON.parse(o(e)).u}catch(i){return null}}var o=t("atob");e.exports=r}).call(this,t("_process"))},{_process:20,atob:2}],8:[function(t,e){"use strict";function n(t){function e(e,n){this.name=t,r("string"==typeof e,"accessToken required to instantiate Mapbox client");var u=o.DEFAULT_ENDPOINT;void 0!==n&&(r("object"==typeof n,"options must be an object"),n.endpoint&&(r("string"==typeof n.endpoint,"endpoint must be a string"),u=n.endpoint),n.account&&(r("string"==typeof n.account,"account must be a string"),this.owner=n.account)),this.client=i({endpoint:u,accessToken:e}),this.accessToken=e,this.endpoint=u,this.owner=this.owner||s(e),r(!!this.owner,"could not determine account from provided accessToken")}return e}var r=t("assert"),o=t("./constants"),i=t("./client"),s=t("./get_user");e.exports=n},{"./client":4,"./constants":5,"./get_user":7,assert:18}],9:[function(t,e){"use strict";var n=t("./make_service"),r=t("xtend/mutable"),o=t("./services/geocoder"),i=t("./services/surface"),s=t("./services/directions"),u=t("./services/uploads"),a=t("./services/matching"),c=t("./services/datasets"),f=t("./services/distance"),p=t("./services/tilestats"),l=n("MapboxClient");r(l.prototype,o.prototype,i.prototype,s.prototype,f.prototype,a.prototype,c.prototype,u.prototype,p.prototype),e.exports=l},{"./make_service":8,"./services/datasets":10,"./services/directions":11,"./services/distance":12,"./services/geocoder":13,"./services/matching":14,"./services/surface":15,"./services/tilestats":16,"./services/uploads":17,"xtend/mutable":68}],10:[function(t,e){"use strict";var n=t("assert"),r=t("geojsonhint/object"),o=t("hat"),i=t("../make_service"),s=t("../constants"),u=e.exports=i("MapboxDatasets");u.prototype.listDatasets=function(t){n("function"==typeof t,"callback must be a function"),this.client({path:s.API_DATASET_DATASETS,params:{owner:this.owner},callback:t})},u.prototype.createDataset=function(t,e){void 0===e&&"function"==typeof t&&(e=t,t={}),n("object"==typeof t,"options must be an object"),n("function"==typeof e,"callback must be a function"),this.client({path:s.API_DATASET_DATASETS,params:{owner:this.owner},entity:t,callback:e})},u.prototype.readDataset=function(t,e){n("string"==typeof t,"dataset must be a string"),n("function"==typeof e,"callback must be a function"),this.client({path:s.API_DATASET_DATASET,params:{owner:this.owner,dataset:t},callback:e})},u.prototype.updateDataset=function(t,e,r){n("string"==typeof t,"dataset must be a string"),n("function"==typeof r,"callback must be a function"),n("object"==typeof e,"options must be an object"),n(!!e.name||!!e.description,"options must include a name or a description"),this.client({path:s.API_DATASET_DATASET,params:{owner:this.owner,dataset:t},method:"patch",entity:e,callback:r})},u.prototype.deleteDataset=function(t,e){n("string"==typeof t,"dataset must be a string"),n("function"==typeof e,"callback must be a function"),this.client({path:s.API_DATASET_DATASET,params:{owner:this.owner,dataset:t},method:"delete",callback:e})},u.prototype.listFeatures=function(t,e,r){void 0===r&&"function"==typeof e&&(r=e,e={}),n("string"==typeof t,"dataset must be a string"),n("object"==typeof e,"options must be a object"),n("function"==typeof r,"callback must be a function");var o={owner:this.owner,dataset:t};e.reverse&&(n("boolean"==typeof e.reverse,"reverse option must be a boolean"),o.reverse=e.reverse),e.limit&&(n("number"==typeof e.limit,"limit option must be a number"),o.limit=e.limit),e.start&&(n("string"==typeof e.start,"start option must be a string"),o.start=e.start),this.client({path:s.API_DATASET_FEATURES,params:o,callback:r})},u.prototype.insertFeature=function(t,e,i){n("string"==typeof e,"dataset must be a string"),n("function"==typeof i,"callback must be a function"),n(0===r.hint(t).length,"feature must be valid GeoJSON");var u=t.id||o();n("string"==typeof u,"The GeoJSON feature's id must be a string"),this.client({path:s.API_DATASET_FEATURE,params:{owner:this.owner,dataset:e,id:u},method:"put",entity:t,callback:i})},u.prototype.readFeature=function(t,e,r){n("string"==typeof t,"id must be a string"),n("string"==typeof e,"dataset must be a string"),n("function"==typeof r,"callback must be a function"),this.client({path:s.API_DATASET_FEATURE,params:{owner:this.owner,dataset:e,id:t},callback:r})},u.prototype.deleteFeature=function(t,e,r){n("string"==typeof t,"id must be a string"),n("string"==typeof e,"dataset must be a string"),n("function"==typeof r,"callback must be a function"),this.client({path:s.API_DATASET_FEATURE,params:{owner:this.owner,dataset:e,id:t},method:"delete",callback:r})},u.prototype.bulkFeatureUpdate=function(t,e,o){n("object"==typeof t,"update must be an object"),n("string"==typeof e,"dataset must be a string"),n("function"==typeof o,"callback must be a function");var i=t.put||[],u=t["delete"]||[];n(0===r.hint({type:"FeatureCollection",features:i}).length,"update.put must be an array of valid GeoJSON features"),n(i.every(function(t){return t.id}),"inserted GeoJSON features must include ids"),n(u.every(function(t){return"string"==typeof t}),"update.delete must be an array of strings"),this.client({path:s.API_DATASET_FEATURES,params:{owner:this.owner,dataset:e},method:"post",entity:{put:i,"delete":u},callback:o})}},{"../constants":5,"../make_service":8,assert:18,"geojsonhint/object":23,hat:24}],11:[function(t,e){"use strict";var n=t("assert"),r=t("../format_points"),o=t("../make_service"),i=t("../constants"),s=o("MapboxDirections");s.prototype.getDirections=function(t,e,o){void 0===o&&"function"==typeof e&&(o=e,e={}),n(Array.isArray(t),"waypoints must be an array"),n("object"==typeof e,"options must be an object"),n("function"==typeof o,"callback must be a function");var s=r(t),u="mapbox.driving",a=!0,c=!0,f="geojson",p="text";e.profile&&(n("string"==typeof e.profile,"profile option must be string"),u=e.profile),"undefined"!=typeof e.alternatives&&(n("boolean"==typeof e.alternatives,"alternatives option must be boolean"),a=e.alternatives),"undefined"!=typeof e.steps&&(n("boolean"==typeof e.steps,"steps option must be boolean"),c=e.steps),e.geometry&&(n("string"==typeof e.geometry,"geometry option must be string"),f=e.geometry),e.instructions&&(n("string"==typeof e.instructions,"instructions option must be string"),p=e.instructions),this.client({path:i.API_DIRECTIONS,params:{encodedWaypoints:s,profile:u,instructions:p,geometry:f,alternatives:a,steps:c},callback:o})},e.exports=s},{"../constants":5,"../format_points":6,"../make_service":8,assert:18}],12:[function(t,e){"use strict";var n=t("assert"),r=t("../make_service"),o=t("../constants"),i=r("MapboxDistance");i.prototype.getDistances=function(t,e,r){void 0===r&&"function"==typeof e&&(r=e,e={}),n(Array.isArray(t),"waypoints must be an array");var i="driving";e.profile&&(n("string"==typeof e.profile,"profile option must be string"),i=e.profile),this.client({path:o.API_DISTANCE,params:{profile:i},entity:{coordinates:t},method:"post",callback:r})},e.exports=i},{"../constants":5,"../make_service":8,assert:18}],13:[function(t,e){"use strict";function n(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var r=t("assert"),o=t("../make_service"),i=t("../constants"),s=o("MapboxGeocoder"),u=5,a=3;s.prototype.geocodeForward=function(t,e,o){void 0===o&&"function"==typeof e&&(o=e,e={}),r("string"==typeof t,"query must be a string"),r("object"==typeof e,"options must be an object"),r("function"==typeof o,"callback must be a function");var s={query:t,dataset:"mapbox.places"},u=a;e.precision&&(r("number"==typeof e.precision,"precision option must be number"),u=e.precision),e.proximity&&(r("number"==typeof e.proximity.latitude&&"number"==typeof e.proximity.longitude,"proximity must be an object with numeric latitude & longitude properties"),s.proximity=n(e.proximity.longitude,u)+","+n(e.proximity.latitude,u)),e.dataset&&(r("string"==typeof e.dataset,"dataset option must be string"),s.dataset=e.dataset),e.country&&(r("string"==typeof e.country,"country option must be string"),s.country=e.country),e.types&&(r("string"==typeof e.types,"types option must be string"),s.types=e.types),this.client({path:i.API_GEOCODER_FORWARD,params:s,callback:o})},s.prototype.geocodeReverse=function(t,e,o){void 0===o&&"function"==typeof e&&(o=e,e={}),r("object"==typeof t,"location must be an object"),r("object"==typeof e,"options must be an object"),r("function"==typeof o,"callback must be a function"),r("number"==typeof t.latitude&&"number"==typeof t.longitude,"location must be an object with numeric latitude & longitude properties");var s={dataset:"mapbox.places"};e.dataset&&(r("string"==typeof e.dataset,"dataset option must be string"),s.dataset=e.dataset);var a=u;e.precision&&(r("number"==typeof e.precision,"precision option must be number"),a=e.precision),e.types&&(r("string"==typeof e.types,"types option must be string"),s.types=e.types),s.longitude=n(t.longitude,a),s.latitude=n(t.latitude,a),this.client({path:i.API_GEOCODER_REVERSE,params:s,callback:o})},e.exports=s},{"../constants":5,"../make_service":8,assert:18}],14:[function(t,e){"use strict";var n=t("assert"),r=t("geojsonhint/object"),o=t("../make_service"),i=t("../constants"),s=o("MapboxMatching");s.prototype.matching=function(t,e,o){void 0===o&&"function"==typeof e&&(o=e,e={}),n(0===r.hint(t).length,"trace must be valid GeoJSON"),n("object"==typeof e,"options must be an object"),n("function"==typeof o,"callback must be a function");var s="mapbox.driving",u=4,a="geojson";void 0!==e.gps_precision&&(n("number"==typeof e.gps_precision,"gps_precision must be a number"),u=e.gps_precision),e.profile&&(n("string"==typeof e.profile,"profile option must be string"),s=e.profile),e.geometry&&(n("string"==typeof e.geometry,"geometry option must be string"),a=e.geometry),this.client({path:i.API_MATCHING,params:{profile:s,geometry:a,gps_precision:u},method:"post",entity:t,callback:o})},e.exports=s},{"../constants":5,"../make_service":8,assert:18,"geojsonhint/object":23}],15:[function(t,e){"use strict";var n=t("assert"),r=t("../format_points"),o=t("../make_service"),i=t("../constants"),s=o("MapboxSurface");s.prototype.surface=function(t,e,o,s,u,a){void 0===a&&"function"==typeof u&&(a=u,u={}),n("string"==typeof t,"mapid must be a string"),n("string"==typeof e,"layer must be a string"),n(Array.isArray(o),"fields must be an array of strings"),n(Array.isArray(s)||"string"==typeof s,"path must be an array of objects or a string"),n("object"==typeof u,"options must be an object"),n("function"==typeof a,"callback must be a function");var c=!0,f=!1;void 0!==u.interpolate&&(n("boolean"==typeof u.interpolate,"interpolate must be a boolean"),c=u.interpolate),void 0!==u.geojson&&(n("boolean"==typeof u.geojson,"geojson option must be boolean"),f=u.geojson);var p={geojson:f,layer:e,mapid:t,fields:o.join(","),interpolate:c};Array.isArray(s)?p.points=r(s):p.encoded_polyline=s,void 0!==u.zoom&&(n("number"==typeof u.zoom,"zoom must be a number"),p.z=u.zoom),this.client({path:i.API_SURFACE,params:p,callback:a})},e.exports=s},{"../constants":5,"../format_points":6,"../make_service":8,assert:18}],16:[function(t,e){"use strict";var n=t("assert"),r=t("../make_service"),o=t("../constants"),i=e.exports=r("MapboxTilestats");i.prototype.createTilestats=function(t,e,r){n("string"==typeof t,"tileset must be a string"),n("function"==typeof r,"callback must be a function"),n(Array.isArray(e),"layers must be an array"),n(e.every(function(t){return"string"==typeof t}),"layers must be an array of strings");var i=t.split(".")[0];i===t&&(i=this.owner),this.client({path:o.API_TILESTATS_STATISTICS,params:{owner:i,tileset:t},entity:{layers:e},method:"post",callback:r})},i.prototype.deleteTilestats=function(t,e){n("string"==typeof t,"tileset must be a string"),n("function"==typeof e,"callback must be a function");var r=t.split(".")[0];r===t&&(r=this.owner),this.client({path:o.API_TILESTATS_STATISTICS,params:{owner:r,tileset:t},method:"delete",callback:e})},i.prototype.getTilestats=function(t,e){n("string"==typeof t,"tileset must be a string"),n("function"==typeof e,"callback must be a function");var r=t.split(".")[0];r===t&&(r=this.owner),this.client({path:o.API_TILESTATS_STATISTICS,params:{owner:r,tileset:t},callback:e})},i.prototype.updateTilestatsLayer=function(t,e,r,i){n("string"==typeof t,"tileset must be a string"),n("function"==typeof i,"callback must be a function"),n("string"==typeof e,"layer must be a string"),n("object"==typeof r,"geometries must be an object");var s=t.split(".")[0];s===t&&(s=this.owner),this.client({path:o.API_TILESTATS_LAYER,params:{owner:s,tileset:t,layer:e},entity:r,method:"post",callback:i})},i.prototype.updateTilestatsAttribute=function(t,e,r,i,s){n("string"==typeof t,"tileset must be a string"),n("function"==typeof s,"callback must be a function"),n("string"==typeof e,"layer must be a string"),n("string"==typeof r,"attribute must be a string"),n("object"==typeof i,"stats must be an object");var u=t.split(".")[0];u===t&&(u=this.owner),this.client({path:o.API_TILESTATS_ATTRIBUTE,params:{owner:u,tileset:t,layer:e,attribute:r},entity:i,method:"post",callback:s})},i.prototype.getTilestatsAttribute=function(t,e,r,i){n("string"==typeof t,"tileset must be a string"),n("function"==typeof i,"callback must be a function"),n("string"==typeof e,"layer must be a string"),n("string"==typeof r,"attribute must be a string");var s=t.split(".")[0];s===t&&(s=this.owner),this.client({path:o.API_TILESTATS_ATTRIBUTE,params:{owner:s,tileset:t,layer:e,attribute:r},callback:i})}},{"../constants":5,"../make_service":8,assert:18}],17:[function(t,e){"use strict";var n=t("assert"),r=t("../make_service"),o=t("../constants"),i=e.exports=r("MapboxUploads");i.prototype.listUploads=function(t){n("function"==typeof t,"callback must be a function"),this.client({path:o.API_UPLOADS,params:{owner:this.owner},callback:t})},i.prototype.createUploadCredentials=function(t){n("function"==typeof t,"callback must be a function"),this.client({path:o.API_UPLOAD_CREDENTIALS,params:{owner:this.owner},callback:t})},i.prototype.createUpload=function(t,e){n("object"==typeof t,"options must be an object"),n("function"==typeof e,"callback must be a function"),this.client({path:o.API_UPLOADS,params:{owner:this.owner},entity:t,callback:e})},i.prototype.readUpload=function(t,e){n("string"==typeof t,"upload must be a string"),n("function"==typeof e,"callback must be a function"),this.client({path:o.API_UPLOAD,params:{owner:this.owner,upload:t},callback:e})},i.prototype.deleteUpload=function(t,e){n("string"==typeof t,"upload must be a string"),n("function"==typeof e,"callback must be a function"),this.client({method:"delete",path:o.API_UPLOAD,params:{owner:this.owner,upload:t},callback:e})}},{"../constants":5,"../make_service":8,assert:18}],18:[function(t,e){function n(t,e){return l.isUndefined(e)?""+e:l.isNumber(e)&&!isFinite(e)?e.toString():l.isFunction(e)||l.isRegExp(e)?e.toString():e}function r(t,e){return l.isString(t)?t.length<e?t:t.slice(0,e):t}function o(t){return r(JSON.stringify(t.actual,n),128)+" "+t.operator+" "+r(JSON.stringify(t.expected,n),128)}function i(t,e,n,r,o){throw new y.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function s(t,e){t||i(t,!0,e,"==",y.ok)}function u(t,e){if(t===e)return!0;if(l.isBuffer(t)&&l.isBuffer(e)){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return l.isDate(t)&&l.isDate(e)?t.getTime()===e.getTime():l.isRegExp(t)&&l.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:l.isObject(t)||l.isObject(e)?c(t,e):t==e}function a(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function c(t,e){if(l.isNullOrUndefined(t)||l.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(l.isPrimitive(t)||l.isPrimitive(e))return t===e;var n=a(t),r=a(e);if(n&&!r||!n&&r)return!1;if(n)return t=d.call(t),e=d.call(e),u(t,e);var o,i,s=m(t),c=m(e);if(s.length!=c.length)return!1;for(s.sort(),c.sort(),i=s.length-1;i>=0;i--)if(s[i]!=c[i])return!1;for(i=s.length-1;i>=0;i--)if(o=s[i],!u(t[o],e[o]))return!1;return!0}function f(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function p(t,e,n,r){var o;l.isString(n)&&(r=n,n=null);try{e()}catch(s){o=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&i(o,n,"Missing expected exception"+r),!t&&f(o,n)&&i(o,n,"Got unwanted exception"+r),t&&o&&n&&!f(o,n)||!t&&o)throw o}var l=t("util/"),d=Array.prototype.slice,h=Object.prototype.hasOwnProperty,y=e.exports=s;y.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var e=t.stackStartFunction||i;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,s=e.name,u=r.indexOf("\n"+s);if(u>=0){var a=r.indexOf("\n",u+1);r=r.substring(a+1)}this.stack=r}}},l.inherits(y.AssertionError,Error),y.fail=i,y.ok=s,y.equal=function(t,e,n){t!=e&&i(t,e,n,"==",y.equal)},y.notEqual=function(t,e,n){t==e&&i(t,e,n,"!=",y.notEqual)},y.deepEqual=function(t,e,n){u(t,e)||i(t,e,n,"deepEqual",y.deepEqual)},y.notDeepEqual=function(t,e,n){u(t,e)&&i(t,e,n,"notDeepEqual",y.notDeepEqual)},y.strictEqual=function(t,e,n){t!==e&&i(t,e,n,"===",y.strictEqual)},y.notStrictEqual=function(t,e,n){t===e&&i(t,e,n,"!==",y.notStrictEqual)},y["throws"]=function(){p.apply(this,[!0].concat(d.call(arguments)))},y.doesNotThrow=function(){p.apply(this,[!1].concat(d.call(arguments)))},y.ifError=function(t){if(t)throw t};var m=Object.keys||function(t){var e=[];for(var n in t)h.call(t,n)&&e.push(n);return e}},{"util/":22}],19:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],20:[function(t,e){function n(){c=!1,s.length?a=s.concat(a):f=-1,a.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=a.length;e;){for(s=a,a=[];++f<e;)s[f].run();f=-1,e=a.length}s=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var s,u=e.exports={},a=[],c=!1,f=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new o(t,e)),1!==a.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],21:[function(t,e){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],22:[function(t,e,n){(function(e,r){function o(t,e){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(e)?r.showHidden=e:e&&n._extend(r,e),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),a(r,t,r.depth)}function i(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function s(t){return t}function u(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function a(t,e,r){if(t.customInspect&&e&&E(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(r,t);return b(o)||(o=a(t,o,r)),o}var i=c(t,e);if(i)return i;var s=Object.keys(e),y=u(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),T(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(e);if(0===s.length){if(E(e)){var m=e.name?": "+e.name:"";return t.stylize("[Function"+m+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(A(e))return t.stylize(Date.prototype.toString.call(e),"date");if(T(e))return f(e)}var g="",v=!1,_=["{","}"];if(h(e)&&(v=!0,_=["[","]"]),E(e)){var w=e.name?": "+e.name:"";g=" [Function"+w+"]"}if(x(e)&&(g=" "+RegExp.prototype.toString.call(e)),A(e)&&(g=" "+Date.prototype.toUTCString.call(e)),T(e)&&(g=" "+f(e)),0===s.length&&(!v||0==e.length))return _[0]+g+_[1];if(0>r)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var j;return j=v?p(t,e,r,y,s):s.map(function(n){return l(t,e,r,y,n,v)}),t.seen.pop(),d(j,g,_)}function c(t,e){if(w(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return v(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,o){for(var i=[],s=0,u=e.length;u>s;++s)i.push(D(e,String(s))?l(t,e,n,r,String(s),!0):"");return o.forEach(function(o){o.match(/^\d+$/)||i.push(l(t,e,n,r,o,!0))}),i}function l(t,e,n,r,o,i){var s,u,c;if(c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},c.get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),D(r,o)||(s="["+o+"]"),u||(t.seen.indexOf(c.value)<0?(u=m(n)?a(t,c.value,null):a(t,c.value,n-1),u.indexOf("\n")>-1&&(u=i?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),w(s)){if(i&&o.match(/^\d+$/))return u;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function d(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function h(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function m(t){return null===t}function g(t){return null==t}function v(t){return"number"==typeof t}function b(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function w(t){return void 0===t}function x(t){return j(t)&&"[object RegExp]"===k(t)}function j(t){return"object"==typeof t&&null!==t}function A(t){return j(t)&&"[object Date]"===k(t)}function T(t){return j(t)&&("[object Error]"===k(t)||t instanceof Error)}function E(t){return"function"==typeof t}function S(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function k(t){return Object.prototype.toString.call(t)}function O(t){return 10>t?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,e=[O(t.getHours()),O(t.getMinutes()),O(t.getSeconds())].join(":");return[t.getDate(),U[t.getMonth()],e].join(" ")}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var I=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,s=String(t).replace(I,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),u=r[n];i>n;u=r[++n])s+=m(u)||!j(u)?" "+u:" "+o(u);return s},n.deprecate=function(t,o){function i(){if(!s){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),s=!0}return t.apply(this,arguments)}if(w(r.process))return function(){return n.deprecate(t,o).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return i};var R,C={};n.debuglog=function(t){if(w(R)&&(R=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!C[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var r=e.pid;C[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else C[t]=function(){};return C[t]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=y,n.isNull=m,n.isNullOrUndefined=g,n.isNumber=v,n.isString=b,n.isSymbol=_,n.isUndefined=w,n.isRegExp=x,n.isObject=j,n.isDate=A,n.isError=T,n.isFunction=E,n.isPrimitive=S,n.isBuffer=t("./support/isBuffer");var U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!j(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":21,_process:20,inherits:19}],23:[function(t,e){function n(t){function e(t){t.type?v[t.type]?t&&v[t.type](t):g.push({message:"The type "+t.type+" is unknown",line:t.__line__}):g.push({message:"The type property is required and was not found",line:t.__line__})}function n(t,e){return t.every(function(t){return null!==t&&typeof t===e})}function r(t,e,n){if("undefined"==typeof t[e])return g.push({message:'"'+e+'" property required',line:t.__line__});if("array"===n){if(!Array.isArray(t[e]))return g.push({message:'"'+e+'" property should be an array, but is an '+typeof t[e]+" instead",line:t.__line__})}else if(n&&typeof t[e]!==n)return g.push({message:'"'+e+'" property should be '+n+", but is an "+typeof t[e]+" instead",line:t.__line__})}function o(t){if(u(t),a(t),!r(t,"features","array")){if(!n(t.features,"object"))return g.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(m)}}function i(t,e){return Array.isArray(t)?t.length<2?g.push({message:"position must have 2 or more elements",line:t.__line__||e}):n(t,"number")?void 0:g.push({message:"each element in a position must be a number",line:t.__line__||e}):g.push({message:"position should be an array, is a "+typeof t+" instead",line:t.__line__||e})}function s(t,e,n,r){if(void 0===r&&void 0!==t.__line__&&(r=t.__line__),0===n)return i(t,r);if(1===n&&e)if("LinearRing"===e){if(!Array.isArray(t[t.length-1]))return g.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r});t.length<4&&g.push({message:"a LinearRing of coordinates needs to have four or more positions",line:r}),!t.length||t[t.length-1].length===t[0].length&&t[t.length-1].every(function(e,n){return t[0][n]===e})||g.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:r})}else"Line"===e&&t.length<2&&g.push({message:"a line needs to have two or more coordinates to be valid",line:r});t.forEach(function(t){s(t,e,n-1,t.__line__||r)})}function u(t){if(t.crs)if("object"==typeof t.crs){var e=r(t.crs,"type","string"),n=r(t.crs,"properties","object");e||n||("name"===t.crs.type?r(t.crs.properties,"name","string"):"link"===t.crs.type&&r(t.crs.properties,"href","string"))}else g.push({message:"the value of the crs property must be an object, not a "+typeof t.crs,line:t.__line__})}function a(t){if(t.bbox)if(Array.isArray(t.bbox)){if(!n(t.bbox,"number"))return g.push({message:"each element in a bbox property must be a number",line:t.bbox.__line__})}else g.push({message:"bbox property must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__
})}function c(t){u(t),a(t),r(t,"coordinates","array")||i(t.coordinates)}function f(t){u(t),a(t),r(t,"coordinates","array")||s(t.coordinates,"LinearRing",2)}function p(t){u(t),a(t),r(t,"coordinates","array")||s(t.coordinates,"LinearRing",3)}function l(t){u(t),a(t),r(t,"coordinates","array")||s(t.coordinates,"Line",1)}function d(t){u(t),a(t),r(t,"coordinates","array")||s(t.coordinates,"Line",2)}function h(t){u(t),a(t),r(t,"coordinates","array")||s(t.coordinates,"",1)}function y(t){u(t),a(t),r(t,"geometries","array")||t.geometries.forEach(function(t){t&&e(t)})}function m(t){u(t),a(t),void 0!==t.id&&"string"!=typeof t.id&&"number"!=typeof t.id&&g.push({message:'Feature "id" property must have a string or number value',line:t.__line__}),"Feature"!==t.type&&g.push({message:"GeoJSON features must have a type=feature property",line:t.__line__}),r(t,"properties","object"),r(t,"geometry","object")||t.geometry&&e(t.geometry)}var g=[],v={Point:c,Feature:m,MultiPoint:h,LineString:l,MultiLineString:d,FeatureCollection:o,GeometryCollection:y,Polygon:f,MultiPolygon:p};return"object"!=typeof t||null===t||void 0===t?(g.push({message:"The root of a GeoJSON object must be an object.",line:0}),g):(e(t),g.forEach(function(t){t.hasOwnProperty("line")&&void 0===t.line&&delete t.line}),g)}e.exports.hint=n},{}],24:[function(t,e){var n=e.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),0>=t)return"0";for(var r=Math.log(Math.pow(2,t))/Math.log(e),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,t/o))/Math.log(e)*o;for(var i=r-Math.floor(r),s="",o=0;o<Math.floor(r);o++){var u=Math.floor(Math.random()*e).toString(e);s=u+s}if(i){var a=Math.pow(e,i),u=Math.floor(Math.random()*a).toString(e);s=u+s}var c=parseInt(s,e);return c!==1/0&&c>=Math.pow(2,t)?n(t,e):s};n.rack=function(t,e,r){var o=function(o){var s=0;do{if(s++>10){if(!r)throw new Error("too many ID collisions, use more bits");t+=r}var u=n(t,e)}while(Object.hasOwnProperty.call(i,u));return i[u]=o,u},i=o.hats={};return o.get=function(t){return o.hats[t]},o.set=function(t,e){return o.hats[t]=e,o},o.bits=t||128,o.base=e||16,o}},{}],25:[function(e,n){!function(t,e){"use strict";var n;t(function(t){function r(t,e){var n,r,o,i;if(n=t,o={},e){for(r in e)i=new RegExp("\\{"+r+"\\}"),i.test(n)?n=n.replace(i,encodeURIComponent(e[r]),"g"):o[r]=e[r];for(r in o)n+=-1===n.indexOf("?")?"?":"&",n+=encodeURIComponent(r),null!==o[r]&&void 0!==o[r]&&(n+="=",n+=encodeURIComponent(o[r]))}return n}function o(t,e){return 0===t.indexOf(e)}function i(t,e){return this instanceof i?void(t instanceof i?(this._template=t.template,this._params=s({},this._params,e)):(this._template=(t||"").toString(),this._params=e||{})):new i(t,e)}var s,u,a,c,f;return s=t("./util/mixin"),a=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,c=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,f=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,i.prototype={append:function(t,e){return new i(this._template+t,s({},this._params,e))},fullyQualify:function(){if(!e)return this;if(this.isFullyQualified())return this;var t=this._template;return o(t,"//")?t=u.protocol+t:o(t,"/")?t=u.origin+t:this.isAbsolute()||(t=u.origin+u.pathname.substring(0,u.pathname.lastIndexOf("/")+1)),-1===t.indexOf("/",8)&&(t+="/"),new i(t,this._params)},isAbsolute:function(){return c.test(this.build())},isFullyQualified:function(){return f.test(this.build())},isCrossOrigin:function(){if(!u)return!0;var t=this.parts();return t.protocol!==u.protocol||t.hostname!==u.hostname||t.port!==u.port},parts:function(){var t,e;return t=this.fullyQualify().build().match(a),e={href:t[0],protocol:t[1],host:t[3]||"",hostname:t[4]||"",port:t[6],pathname:t[7]||"",search:t[8]||"",hash:t[9]||""},e.origin=e.protocol+"//"+e.host,e.port=e.port||("https:"===e.protocol?"443":"http:"===e.protocol?"80":""),e},build:function(t){return r(this._template,s({},this._params,t))},toString:function(){return this.build()}},u=e?new i(e.href).parts():n,i})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)},"undefined"!=typeof window?window.location:void 0)},{"./util/mixin":63}],26:[function(e,n){!function(t){"use strict";t(function(t){var e=t("./client/default"),n=t("./client/xhr");return e.setPlatformDefaultClient(n),e})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./client/default":28,"./client/xhr":29}],27:[function(e,n){!function(t){"use strict";t(function(){return function(t,e){return e&&(t.skip=function(){return e}),t.wrap=function(e,n){return e(t,n)},t.chain=function(){return"undefined"!=typeof console&&console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),t.wrap.apply(this,arguments)},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],28:[function(e,n){!function(t){"use strict";var e;t(function(t){function n(){return o.apply(e,arguments)}var r,o,i;return r=t("../client"),n.setDefaultClient=function(t){o=t},n.getDefaultClient=function(){return o},n.resetDefaultClient=function(){o=i},n.setPlatformDefaultClient=function(t){if(i)throw new Error("Unable to redefine platformDefaultClient");o=i=t},r(n)})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../client":27}],29:[function(e,n){!function(t,e){"use strict";t(function(t){function n(t){var e={};return t?(t.trim().split(c).forEach(function(t){var n,r,o;n=t.indexOf(":"),r=s(t.substring(0,n).trim()),o=t.substring(n+1).trim(),e[r]?Array.isArray(e[r])?e[r].push(o):e[r]=[e[r],o]:e[r]=o}),e):e}function r(t,e){return Object.keys(e||{}).forEach(function(n){if(e.hasOwnProperty(n)&&n in t)try{t[n]=e[n]}catch(r){}}),t}var o,i,s,u,a,c;return o=t("when"),i=t("../UrlBuilder"),s=t("../util/normalizeHeaderName"),u=t("../util/responsePromise"),a=t("../client"),c=/[\r|\n]+/,a(function(t){return u.promise(function(o,s){var u,a,c,f,p,l,d,h;if(t="string"==typeof t?{path:t}:t||{},d={request:t},t.canceled)return d.error="precanceled",void s(d);if(h=t.engine||e.XMLHttpRequest,!h)return void s({request:t,error:"xhr-not-available"});p=t.entity,t.method=t.method||(p?"POST":"GET"),a=t.method,c=new i(t.path||"",t.params).build();try{u=d.raw=new h,r(u,t.mixin),u.open(a,c,!0),r(u,t.mixin),f=t.headers;for(l in f)("Content-Type"!==l||"multipart/form-data"!==f[l])&&u.setRequestHeader(l,f[l]);t.canceled=!1,t.cancel=function(){t.canceled=!0,u.abort(),s(d)},u.onreadystatechange=function(){t.canceled||u.readyState===(h.DONE||4)&&(d.status={code:u.status,text:u.statusText},d.headers=n(u.getAllResponseHeaders()),d.entity=u.responseText,d.status.code>0?o(d):setTimeout(function(){o(d)},0))};try{u.onerror=function(){d.error="loaderror",s(d)}}catch(y){}u.send(p)}catch(y){d.error="loaderror",s(d)}})})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)},"undefined"!=typeof window?window:void 0)},{"../UrlBuilder":25,"../client":27,"../util/normalizeHeaderName":64,"../util/responsePromise":65,when:60}],30:[function(e,n){!function(t){"use strict";t(function(t){function e(t){return t}function n(t){return t}function r(t){return t}function o(t){return p.promise(function(e,n){t.forEach(function(t){p(t,e,n)})})}function i(t){return this instanceof i?void a(this,t):new i(t)}function s(t){var s,a,l,d;return t=t||{},s=t.init||e,a=t.request||n,l=t.success||t.response||r,d=t.error||function(){return p((t.response||r).apply(this,arguments),p.reject,p.reject)},function(e,n){function r(t){var s,u;return s={},u={arguments:Array.prototype.slice.call(arguments),client:r},t="string"==typeof t?{path:t}:t||{},t.originator=t.originator||r,c(a.call(s,t,n,u),function(t){var r,a,c;return c=e,t instanceof i&&(a=t.abort,c=t.client||c,r=t.response,t=t.request),r=r||p(t,function(t){return p(c(t),function(t){return l.call(s,t,n,u)},function(t){return d.call(s,t,n,u)})}),a?o([r,a]):r},function(e){return p.reject({request:t,error:e})})}return"object"==typeof e&&(n=e),"function"!=typeof e&&(e=t.client||u),n=s(n||{}),f(r,e)}}var u,a,c,f,p;return u=t("./client/default"),a=t("./util/mixin"),c=t("./util/responsePromise"),f=t("./client"),p=t("when"),s.ComplexRequest=i,s})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./client":27,"./client/default":28,"./util/mixin":63,"./util/responsePromise":65,when:60}],31:[function(e,n){!function(t){"use strict";t(function(t){var e,n,r;return e=t("../interceptor"),n=t("../util/mixin"),r=function(){function t(t,e,r){(t in e||t in r)&&(e[t]=n({},r[t],e[t]))}function e(t,e,n){t in n&&!(t in e)&&(e[t]=n[t])}var r={method:e,path:e,params:t,headers:t,entity:e,mixin:t};return function(t,e){for(var n in r)r[n](n,t,e);return t}}(),e({request:function(t,e){return r(t,e)}})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../interceptor":30,"../util/mixin":63}],32:[function(e,n){!function(t){"use strict";t(function(t){var e,n;return e=t("../interceptor"),n=t("when"),e({init:function(t){return t.code=t.code||400,t},response:function(t,e){return t.status&&t.status.code>=e.code?n.reject(t):t}})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../interceptor":30,when:60}],33:[function(e,n){!function(t){"use strict";t(function(t){var e,n,r,o,i;return e=t("../interceptor"),n=t("../mime"),r=t("../mime/registry"),i=t("when"),o={read:function(t){return t},write:function(t){return t}},e({init:function(t){return t.registry=t.registry||r,t},request:function(t,e){var r,s;return s=t.headers||(t.headers={}),r=n.parse(s["Content-Type"]=s["Content-Type"]||e.mime||"text/plain"),s.Accept=s.Accept||e.accept||r.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in t?e.registry.lookup(r).otherwise(function(){if(e.permissive)return o;throw"mime-unknown"}).then(function(n){var o=e.client||t.originator;return i.attempt(n.write,t.entity,{client:o,request:t,mime:r,registry:e.registry}).otherwise(function(){throw"mime-serialization"}).then(function(e){return t.entity=e,t})}):t},response:function(t,e){if(!(t.headers&&t.headers["Content-Type"]&&t.entity))return t;var r=n.parse(t.headers["Content-Type"]);return e.registry.lookup(r).otherwise(function(){return o}).then(function(n){var o=e.client||t.request&&t.request.originator;return i.attempt(n.read,t.entity,{client:o,response:t,mime:r,registry:e.registry}).otherwise(function(e){throw t.error="mime-deserialization",t.cause=e,t}).then(function(e){return t.entity=e,t})})}})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../interceptor":30,"../mime":36,"../mime/registry":37,when:60}],34:[function(e,n){!function(t){"use strict";t(function(t){function e(t,e){return 0===t.indexOf(e)}function n(t,e){return t.lastIndexOf(e)+e.length===t.length}var r,o;return r=t("../interceptor"),o=t("../UrlBuilder"),r({request:function(t,r){var i;return r.prefix&&!new o(t.path).isFullyQualified()&&(i=r.prefix,t.path&&(n(i,"/")||e(t.path,"/")||(i+="/"),i+=t.path),t.path=i),t}})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../UrlBuilder":25,"../interceptor":30}],35:[function(e,n){!function(t){"use strict";t(function(t){var e,n,r;return e=t("../interceptor"),n=t("../util/uriTemplate"),r=t("../util/mixin"),e({init:function(t){return t.params=t.params||{},t.template=t.template||"",t},request:function(t,e){var o,i;return o=t.path||e.template,i=r({},t.params,e.params),t.path=n.expand(o,i),delete t.params,t}})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../interceptor":30,"../util/mixin":63,"../util/uriTemplate":67}],36:[function(e,n){!function(t){"use strict";var e;t(function(){function t(t){var n,r;return n=t.split(";"),r=n[0].trim().split("+"),{raw:t,type:r[0],suffix:r[1]?"+"+r[1]:"",params:n.slice(1).reduce(function(t,n){return n=n.split("="),t[n[0].trim()]=n[1]?n[1].trim():e,t},{})}}return{parse:t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],37:[function(e,n){!function(t){"use strict";t(function(t){function e(t){this.lookup=function(e){var o;return o="string"==typeof e?n.parse(e):e,t[o.raw]?t[o.raw]:t[o.type+o.suffix]?t[o.type+o.suffix]:t[o.type]?t[o.type]:t[o.suffix]?t[o.suffix]:r.reject(new Error('Unable to locate converter for mime "'+o.raw+'"'))},this.delegate=function(t){return{read:function(){var e=arguments;return this.lookup(t).then(function(t){return t.read.apply(this,e)}.bind(this))}.bind(this),write:function(){var e=arguments;return this.lookup(t).then(function(t){return t.write.apply(this,e)}.bind(this))}.bind(this)}},this.register=function(e,n){return t[e]=r(n),t[e]},this.child=function(){return new e(Object.create(t))}}var n,r,o;return n=t("../mime"),r=t("when"),o=new e({}),o.register("application/hal",t("./type/application/hal")),o.register("application/json",t("./type/application/json")),o.register("application/x-www-form-urlencoded",t("./type/application/x-www-form-urlencoded")),o.register("multipart/form-data",t("./type/multipart/form-data")),o.register("text/plain",t("./type/text/plain")),o.register("+json",o.delegate("application/json")),o})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../mime":36,"./type/application/hal":38,"./type/application/json":39,"./type/application/x-www-form-urlencoded":40,"./type/multipart/form-data":41,"./type/text/plain":42,when:60}],38:[function(e,n){!function(t){"use strict";t(function(t){function e(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!0,enumerable:!1,writeable:!0})}var n,r,o,i,s,u;return n=t("../../../interceptor/pathPrefix"),r=t("../../../interceptor/template"),o=t("../../../util/find"),i=t("../../../util/lazyPromise"),s=t("../../../util/responsePromise"),u=t("when"),{read:function(t,a){function c(t,e){(e&&p&&p.warn||p.log)&&(p.warn||p.log).call(p,"Relationship '"+t+"' is deprecated, see "+e)}var f,p;return a=a||{},f=a.client,p=a.console||p,a.registry.lookup(a.mime.suffix).then(function(p){return u(p.read(t,a)).then(function(t){return o.findProperties(t,"_embedded",function(t,n,r){Object.keys(t).forEach(function(r){if(!(r in n)){var o=s({entity:t[r]});e(n,r,o)}}),e(n,r,t)}),o.findProperties(t,"_links",function(t,o,u){Object.keys(t).forEach(function(n){var u=t[n];n in o||e(o,n,s.make(i(function(){return u.deprecation&&c(n,u.deprecation),u.templated===!0?r(f)({path:u.href}):f({path:u.href})})))}),e(o,u,t),e(o,"clientFor",function(e,o){var i=t[e];if(!i)throw new Error("Unknown relationship: "+e);return i.deprecation&&c(e,i.deprecation),i.templated===!0?r(o||f,{template:i.href}):n(o||f,{prefix:i.href})}),e(o,"requestFor",function(t,e,n){var r=this.clientFor(t,n);return r(e)})}),t})})},write:function(t,e){return e.registry.lookup(e.mime.suffix).then(function(n){return n.write(t,e)})}}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../../../interceptor/pathPrefix":34,"../../../interceptor/template":35,"../../../util/find":61,"../../../util/lazyPromise":62,"../../../util/responsePromise":65,when:60}],39:[function(e,n){!function(t){"use strict";t(function(){function t(e,n){return{read:function(t){return JSON.parse(t,e)},write:function(t){return JSON.stringify(t,n)},extend:t}}return t()})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],40:[function(e,n){!function(t){"use strict";t(function(){function t(t){return t=encodeURIComponent(t),t.replace(r,"+")}function e(t){return t=t.replace(o," "),decodeURIComponent(t)}function n(e,r,o){return Array.isArray(o)?o.forEach(function(t){e=n(e,r,t)}):(e.length>0&&(e+="&"),e+=t(r),void 0!==o&&null!==o&&(e+="="+t(o))),e}var r,o;return r=/%20/g,o=/\+/g,{read:function(t){var n={};return t.split("&").forEach(function(t){var r,o,i;r=t.split("="),o=e(r[0]),i=2===r.length?e(r[1]):null,o in n?(Array.isArray(n[o])||(n[o]=[n[o]]),n[o].push(i)):n[o]=i}),n},write:function(t){var e="";return Object.keys(t).forEach(function(r){e=n(e,r,t[r])}),e}}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],41:[function(e,n){!function(t){"use strict";t(function(){function t(t){return t&&1===t.nodeType&&"FORM"===t.tagName}function e(t){var e,n=new FormData;for(var r in t)t.hasOwnProperty(r)&&(e=t[r],e instanceof File?n.append(r,e,e.name):e instanceof Blob?n.append(r,e):n.append(r,String(e)));return n}return{write:function(n){if("undefined"==typeof FormData)throw new Error("The multipart/form-data mime serializer requires FormData support");if(n instanceof FormData)return n;if(t(n))return new FormData(n);if("object"==typeof n&&null!==n)return e(n);throw new Error("Unable to create FormData from object "+n)}}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],42:[function(e,n){!function(t){"use strict";t(function(){return{read:function(t){return t},write:function(t){return t.toString()}}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],43:[function(e,n){!function(t){"use strict";t(function(t){var e=t("./makePromise"),n=t("./Scheduler"),r=t("./env").asap;return e({scheduler:new n(r)})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./Scheduler":44,"./env":56,"./makePromise":58}],44:[function(e,n){!function(t){"use strict";t(function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],45:[function(e,n){!function(t){"use strict";t(function(){function t(e){Error.call(this),this.message=e,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],46:[function(e,n){!function(t){"use strict";t(function(){function t(t,n){function r(e,r,i){var s=t._defer(),u=i.length,a=new Array(u);return o({f:e,thisArg:r,args:i,params:a,i:u-1,call:n},s._handler),s}function o(e,r){if(e.i<0)return n(e.f,e.thisArg,e.params,r);var o=t._handler(e.args[e.i]);o.fold(i,e,void 0,r)}function i(t,e,n){t.params[t.i]=e,t.i-=1,o(t,n)}return arguments.length<2&&(n=e),r}function e(t,e,n,r){try{r.resolve(t.apply(e,n))}catch(o){r.reject(o)}}return t.tryCatchResolve=e,t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],47:[function(e,n){!function(t){"use strict";t(function(t){var e=t("../state"),n=t("../apply");return function(t){function r(e){function n(t){f=null,this.resolve(t)}function r(t){this.resolved||(f.push(t),0===--c&&this.reject(f))}for(var o,i,s=t._defer(),u=s._handler,a=e.length>>>0,c=a,f=[],p=0;a>p;++p)if(i=e[p],void 0!==i||p in e){if(o=t._handler(i),o.state()>0){u.become(o),t._visitRemaining(e,p,o);break}o.visit(u,n,r)}else--c;return 0===c&&u.reject(new RangeError("any(): array must not be empty")),s}function o(e,n){function r(t){this.resolved||(f.push(t),0===--d&&(p=null,this.resolve(f)))}function o(t){this.resolved||(p.push(t),0===--i&&(f=null,this.reject(p)))}var i,s,u,a=t._defer(),c=a._handler,f=[],p=[],l=e.length>>>0,d=0;for(u=0;l>u;++u)s=e[u],(void 0!==s||u in e)&&++d;for(n=Math.max(n,0),i=d-n+1,d=Math.min(n,d),n>d?c.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+d)):0===d&&c.resolve(f),u=0;l>u;++u)s=e[u],(void 0!==s||u in e)&&t._handler(s).visit(c,r,o,c.notify);return a}function i(e,n){return t._traverse(n,e)}function s(e,n){var r=v.call(e);return t._traverse(n,r).then(function(t){return u(r,t)})}function u(e,n){for(var r=n.length,o=new Array(r),i=0,s=0;r>i;++i)n[i]&&(o[s++]=t._handler(e[i]).value);return o.length=s,o}function a(t){return y(t.map(c))}function c(n){var r=t._handler(n);return 0===r.state()?h(n).then(e.fulfilled,e.rejected):(r._unreport(),e.inspect(r))}function f(t,e){return arguments.length>2?m.call(t,l(e),arguments[2]):m.call(t,l(e))}function p(t,e){return arguments.length>2?g.call(t,l(e),arguments[2]):g.call(t,l(e))}function l(t){return function(e,n,r){return d(t,void 0,[e,n,r])}}var d=n(t),h=t.resolve,y=t.all,m=Array.prototype.reduce,g=Array.prototype.reduceRight,v=Array.prototype.slice;return t.any=r,t.some=o,t.settle=a,t.map=i,t.filter=s,t.reduce=f,t.reduceRight=p,t.prototype.spread=function(t){return this.then(y).then(function(e){return t.apply(this,e)})},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../apply":46,"../state":59}],48:[function(e,n){!function(t){"use strict";t(function(){function t(){throw new TypeError("catch predicate must be a function")}function e(t,e){return n(e)?t instanceof e:e(t)}function n(t){return t===Error||null!=t&&t.prototype instanceof Error}function r(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function o(t){return t}return function(n){function i(t,n){return function(r){return e(r,n)?t.call(this,r):c(r)}}function s(t,e,n,o){var i=t.call(e);return r(i)?u(i,n,o):n(o)}function u(t,e,n){return a(t).then(function(){return e(n)})}var a=n.resolve,c=n.reject,f=n.prototype["catch"];return n.prototype.done=function(t,e){this._handler.visit(this._handler.receiver,t,e)},n.prototype["catch"]=n.prototype.otherwise=function(e){return arguments.length<2?f.call(this,e):"function"!=typeof e?this.ensure(t):f.call(this,i(arguments[1],e))},n.prototype["finally"]=n.prototype.ensure=function(t){return"function"!=typeof t?this:this.then(function(e){return s(t,this,o,e)},function(e){return s(t,this,c,e)})},n.prototype["else"]=n.prototype.orElse=function(t){return this.then(void 0,function(){return t})},n.prototype["yield"]=function(t){return this.then(function(){return t})},n.prototype.tap=function(t){return this.then(t)["yield"](this)},n}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],49:[function(e,n){!function(t){"use strict";t(function(){return function(t){return t.prototype.fold=function(e,n){var r=this._beget();return this._handler.fold(function(n,r,o){t._handler(n).fold(function(t,n,r){r.resolve(e.call(this,n,t))},r,this,o)},n,r._handler.receiver,r._handler),r},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],50:[function(e,n){!function(t){"use strict";t(function(t){var e=t("../state").inspect;return function(t){return t.prototype.inspect=function(){return e(t._handler(this))},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../state":59}],51:[function(e,n){!function(t){"use strict";t(function(){return function(t){function e(t,e,r,o){return n(function(e){return[e,t(e)]},e,r,o)}function n(t,e,o,i){function s(i,s){return r(o(i)).then(function(){return n(t,e,o,s)})}return r(i).then(function(n){return r(e(n)).then(function(e){return e?n:r(t(n)).spread(s)})})}var r=t.resolve;return t.iterate=e,t.unfold=n,t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],52:[function(e,n){!function(t){"use strict";t(function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],53:[function(e,n){!function(t){"use strict";t(function(t){function e(t,e,r,o){return n.setTimer(function(){t(r,o,e)},e)}var n=t("../env"),r=t("../TimeoutError");return function(t){function o(t,n,r){e(i,t,n,r)}function i(t,e){e.resolve(t)}function s(t,e,n){var o="undefined"==typeof t?new r("timed out after "+n+"ms"):t;e.reject(o)}return t.prototype.delay=function(t){var e=this._beget();return this._handler.fold(o,t,void 0,e._handler),e},t.prototype.timeout=function(t,r){var o=this._beget(),i=o._handler,u=e(s,t,r,o._handler);return this._handler.visit(i,function(t){n.clearTimer(u),this.resolve(t)},function(t){n.clearTimer(u),this.reject(t)},i.notify),o},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../TimeoutError":45,"../env":56}],54:[function(e,n){!function(t){"use strict";t(function(t){function e(t){throw t}function n(){}var r=t("../env").setTimer,o=t("../format");return function(t){function i(t){t.handled||(d.push(t),f("Potentially unhandled rejection ["+t.id+"] "+o.formatError(t.value)))}function s(t){var e=d.indexOf(t);e>=0&&(d.splice(e,1),p("Handled previous rejection ["+t.id+"] "+o.formatObject(t.value)))}function u(t,e){l.push(t,e),null===h&&(h=r(a,0))}function a(){for(h=null;l.length>0;)l.shift()(l.shift())}var c,f=n,p=n;"undefined"!=typeof console&&(c=console,f="undefined"!=typeof c.error?function(t){c.error(t)}:function(t){c.log(t)},p="undefined"!=typeof c.info?function(t){c.info(t)}:function(t){c.log(t)}),t.onPotentiallyUnhandledRejection=function(t){u(i,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){u(s,t)},t.onFatalRejection=function(t){u(e,t.value)};var l=[],d=[],h=null;return t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../env":56,"../format":57}],55:[function(e,n){!function(t){"use strict";t(function(){return function(t){return t.prototype["with"]=t.prototype.withThis=function(t){var e=this._beget(),n=e._handler;return n.receiver=t,this._handler.chain(n,t),e},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],56:[function(e,n){(function(r){!function(t){"use strict";t(function(t){function e(){return"undefined"!=typeof r&&"[object process]"===Object.prototype.toString.call(r)}function n(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function o(t){function e(){var t=n;n=void 0,t()}var n,r=document.createTextNode(""),o=new t(e);o.observe(r,{characterData:!0});var i=0;return function(t){n=t,r.data=i^=1}}var i,s="undefined"!=typeof setTimeout&&setTimeout,u=function(t,e){return setTimeout(t,e)},a=function(t){return clearTimeout(t)},c=function(t){return s(t,0)};if(e())c=function(t){return r.nextTick(t)};else if(i=n())c=o(i);else if(!s){var f=t,p=f("vertx");u=function(t,e){return p.setTimer(e,t)},a=p.cancelTimer,c=p.runOnLoop||p.runOnContext}return{setTimer:u,clearTimer:a,asap:c}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})}).call(this,e("_process"))},{_process:20}],57:[function(e,n){!function(t){"use strict";t(function(){function t(t){var n="object"==typeof t&&null!==t&&t.stack?t.stack:e(t);return t instanceof Error?n:n+" (WARNING: non-Error used)"}function e(t){var e=String(t);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=n(t,e)),e}function n(t,e){try{return JSON.stringify(t)}catch(n){return e}}return{formatError:t,formatObject:e,tryStringify:n}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],58:[function(e,n){(function(e){!function(t){"use strict";t(function(){return function(t){function n(t,e){this._handler=t===_?e:r(t)}function r(t){function e(t){o.resolve(t)}function n(t){o.reject(t)}function r(t){o.notify(t)}var o=new x;try{t(e,n,r)}catch(i){n(i)}return o}function o(t){return U(t)?t:new n(_,new j(g(t)))}function i(t){return new n(_,new j(new E(t)))}function s(){return tt}function u(){return new n(_,new x)}function a(t,e){var n=new x(t.receiver,t.join().context);return new e(_,n)}function c(t){return p(Q,null,t)}function f(t,e){return p(M,t,e)}function p(t,e,r){function o(n,o,s){s.resolved||l(r,i,n,t(e,o,n),s)}function i(t,e,n){f[t]=e,0===--c&&n.become(new T(f))}for(var s,u="function"==typeof e?o:i,a=new x,c=r.length>>>0,f=new Array(c),p=0;p<r.length&&!a.resolved;++p)s=r[p],void 0!==s||p in r?l(r,u,p,s,a):--c;return 0===c&&a.become(new T(f)),new n(_,a)}function l(t,e,n,r,o){if(q(r)){var i=v(r),s=i.state();0===s?i.fold(e,n,void 0,o):s>0?e(n,i.value,o):(o.become(i),d(t,n+1,i))}else e(n,r,o)}function d(t,e,n){for(var r=e;r<t.length;++r)h(g(t[r]),n)}function h(t,e){if(t!==e){var n=t.state();0===n?t.visit(t,void 0,t._unreport):0>n&&t._unreport()}}function y(t){return"object"!=typeof t||null===t?i(new TypeError("non-iterable passed to race()")):0===t.length?s():1===t.length?o(t[0]):m(t)}function m(t){var e,r,o,i=new x;for(e=0;e<t.length;++e)if(r=t[e],void 0!==r||e in t){if(o=g(r),0!==o.state()){i.become(o),d(t,e+1,o);break}o.visit(i,i.resolve,i.reject)}return new n(_,i)}function g(t){return U(t)?t._handler.join():q(t)?b(t):new T(t)}function v(t){return U(t)?t._handler.join():b(t)}function b(t){try{var e=t.then;return"function"==typeof e?new A(e,t):new T(t)}catch(n){return new E(n)}}function _(){}function w(){}function x(t,e){n.createContext(this,e),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function j(t){this.handler=t}function A(t,e){x.call(this),$.enqueue(new I(t,e,this))}function T(t){n.createContext(this),this.value=t}function E(t){n.createContext(this),this.id=++Z,this.value=t,this.handled=!1,this.reported=!1,this._report()}function S(t,e){this.rejection=t,this.context=e}function k(t){this.rejection=t}function O(){return new E(new TypeError("Promise cycle"))}function P(t,e){this.continuation=t,this.handler=e}function D(t,e){this.handler=e,this.value=t}function I(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function R(t,e,n,r,o){try{t.call(e,n,r,o)}catch(i){r(i)}}function C(t,e,n,r){this.f=t,this.z=e,this.c=n,this.to=r,this.resolver=Y,this.receiver=this}function U(t){return t instanceof n}function q(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function L(t,e,r,o){return"function"!=typeof t?o.become(e):(n.enterContext(e),z(t,e.value,r,o),void n.exitContext())}function F(t,e,r,o,i){return"function"!=typeof t?i.become(r):(n.enterContext(r),G(t,e,r.value,o,i),void n.exitContext())}function N(t,e,r,o,i){return"function"!=typeof t?i.notify(e):(n.enterContext(r),H(t,e,o,i),void n.exitContext())}function M(t,e,n){try{return t(e,n)}catch(r){return i(r)}}function z(t,e,n,r){try{r.become(g(t.call(n,e)))}catch(o){r.become(new E(o))}}function G(t,e,n,r,o){try{t.call(r,e,n,o)}catch(i){o.become(new E(i))}}function H(t,e,n,r){try{r.notify(t.call(n,e))}catch(o){r.notify(o)}}function J(t,e){e.prototype=V(t.prototype),e.prototype.constructor=e}function Q(t,e){return e}function B(){}function W(){return"undefined"!=typeof e&&null!==e&&"function"==typeof e.emit?function(t,n){return"unhandledRejection"===t?e.emit(t,n.value,n):e.emit(t,n)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,e,n){var r=!1;try{var o=new n("unhandledRejection");r=o instanceof n}catch(i){}return r?function(t,r){var o=new n(t,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!e.dispatchEvent(o)}:t}(B,self,CustomEvent):B}var $=t.scheduler,K=W(),V=Object.create||function(t){function e(){}return e.prototype=t,new e};n.resolve=o,n.reject=i,n.never=s,n._defer=u,n._handler=g,n.prototype.then=function(t,e,n){var r=this._handler,o=r.join().state();if("function"!=typeof t&&o>0||"function"!=typeof e&&0>o)return new this.constructor(_,r);var i=this._beget(),s=i._handler;return r.chain(s,r.receiver,t,e,n),i},n.prototype["catch"]=function(t){return this.then(void 0,t)},n.prototype._beget=function(){return a(this._handler,this.constructor)},n.all=c,n.race=y,n._traverse=f,n._visitRemaining=d,_.prototype.when=_.prototype.become=_.prototype.notify=_.prototype.fail=_.prototype._unreport=_.prototype._report=B,_.prototype._state=0,_.prototype.state=function(){return this._state},_.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},_.prototype.chain=function(t,e,n,r,o){this.when({resolver:t,receiver:e,fulfilled:n,rejected:r,progress:o})},_.prototype.visit=function(t,e,n,r){this.chain(Y,t,e,n,r)},_.prototype.fold=function(t,e,n,r){this.when(new C(t,e,n,r))},J(_,w),w.prototype.become=function(t){t.fail()};var Y=new w;J(_,x),x.prototype._state=0,x.prototype.resolve=function(t){this.become(g(t))},x.prototype.reject=function(t){this.resolved||this.become(new E(t))},x.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if(t=t.handler,t===this)return this.handler=O();return t},x.prototype.run=function(){var t=this.consumers,e=this.handler;
this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},x.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&$.enqueue(this),void 0!==this.context&&t._report(this.context))},x.prototype.when=function(t){this.resolved?$.enqueue(new P(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},x.prototype.notify=function(t){this.resolved||$.enqueue(new D(t,this))},x.prototype.fail=function(t){var e="undefined"==typeof t?this.context:t;this.resolved&&this.handler.join().fail(e)},x.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},x.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},J(_,j),j.prototype.when=function(t){$.enqueue(new P(t,this))},j.prototype._report=function(t){this.join()._report(t)},j.prototype._unreport=function(){this.join()._unreport()},J(x,A),J(_,T),T.prototype._state=1,T.prototype.fold=function(t,e,n,r){F(t,e,this,n,r)},T.prototype.when=function(t){L(t.fulfilled,this,t.receiver,t.resolver)};var Z=0;J(_,E),E.prototype._state=-1,E.prototype.fold=function(t,e,n,r){r.become(this)},E.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),L(t.rejected,this,t.receiver,t.resolver)},E.prototype._report=function(t){$.afterQueue(new S(this,t))},E.prototype._unreport=function(){this.handled||(this.handled=!0,$.afterQueue(new k(this)))},E.prototype.fail=function(t){this.reported=!0,K("unhandledRejection",this),n.onFatalRejection(this,void 0===t?this.context:t)},S.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,K("unhandledRejection",this.rejection)||n.onPotentiallyUnhandledRejection(this.rejection,this.context))},k.prototype.run=function(){this.rejection.reported&&(K("rejectionHandled",this.rejection)||n.onPotentiallyUnhandledRejectionHandled(this.rejection))},n.createContext=n.enterContext=n.exitContext=n.onPotentiallyUnhandledRejection=n.onPotentiallyUnhandledRejectionHandled=n.onFatalRejection=B;var X=new _,tt=new n(_,X);return P.prototype.run=function(){this.handler.join().when(this.continuation)},D.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,n=0;n<t.length;++n)e=t[n],N(e.progress,this.value,this.handler,e.receiver,e.resolver)},I.prototype.run=function(){function t(t){r.resolve(t)}function e(t){r.reject(t)}function n(t){r.notify(t)}var r=this.resolver;R(this._then,this.thenable,t,e,n)},C.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},C.prototype.rejected=function(t){this.to.reject(t)},C.prototype.progress=function(t){this.to.notify(t)},n}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})}).call(this,e("_process"))},{_process:20}],59:[function(e,n){!function(t){"use strict";t(function(){function t(){return{state:"pending"}}function e(t){return{state:"rejected",reason:t}}function n(t){return{state:"fulfilled",value:t}}function r(r){var o=r.state();return 0===o?t():o>0?n(r.value):e(r.value)}return{pending:t,fulfilled:n,rejected:e,inspect:r}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],60:[function(e,n){!function(t){"use strict";t(function(t){function e(t,e,n,r){var o=j.resolve(t);return arguments.length<2?o:o.then(e,n,r)}function n(t){return new j(t)}function r(t){return function(){for(var e=0,n=arguments.length,r=new Array(n);n>e;++e)r[e]=arguments[e];return A(t,this,r)}}function o(t){for(var e=0,n=arguments.length-1,r=new Array(n);n>e;++e)r[e]=arguments[e+1];return A(t,this,r)}function i(){return new s}function s(){function t(t){r._handler.resolve(t)}function e(t){r._handler.reject(t)}function n(t){r._handler.notify(t)}var r=j._defer();this.promise=r,this.resolve=t,this.reject=e,this.notify=n,this.resolver={resolve:t,reject:e,notify:n}}function u(t){return t&&"function"==typeof t.then}function a(){return j.all(arguments)}function c(t){return e(t,j.all)}function f(t){return e(t,j.settle)}function p(t,n){return e(t,function(t){return j.map(t,n)})}function l(t,n){return e(t,function(t){return j.filter(t,n)})}var d=t("./lib/decorators/timed"),h=t("./lib/decorators/array"),y=t("./lib/decorators/flow"),m=t("./lib/decorators/fold"),g=t("./lib/decorators/inspect"),v=t("./lib/decorators/iterate"),b=t("./lib/decorators/progress"),_=t("./lib/decorators/with"),w=t("./lib/decorators/unhandledRejection"),x=t("./lib/TimeoutError"),j=[h,y,m,v,b,g,_,d,w].reduce(function(t,e){return e(t)},t("./lib/Promise")),A=t("./lib/apply")(j);return e.promise=n,e.resolve=j.resolve,e.reject=j.reject,e.lift=r,e["try"]=o,e.attempt=o,e.iterate=j.iterate,e.unfold=j.unfold,e.join=a,e.all=c,e.settle=f,e.any=r(j.any),e.some=r(j.some),e.race=r(j.race),e.map=p,e.filter=l,e.reduce=r(j.reduce),e.reduceRight=r(j.reduceRight),e.isPromiseLike=u,e.Promise=j,e.defer=i,e.TimeoutError=x,e})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./lib/Promise":43,"./lib/TimeoutError":45,"./lib/apply":46,"./lib/decorators/array":47,"./lib/decorators/flow":48,"./lib/decorators/fold":49,"./lib/decorators/inspect":50,"./lib/decorators/iterate":51,"./lib/decorators/progress":52,"./lib/decorators/timed":53,"./lib/decorators/unhandledRejection":54,"./lib/decorators/with":55}],61:[function(e,n){!function(t){"use strict";t(function(){return{findProperties:function t(e,n,r){"object"==typeof e&&null!==e&&(n in e&&r(e[n],e,n),Object.keys(e).forEach(function(o){t(e[o],n,r)}))}}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],62:[function(e,n){!function(t){"use strict";t(function(t){function e(t){var e,r,o,i,s;return e=n.defer(),r=!1,o=e.resolver,i=e.promise,s=i.then,i.then=function(){return r||(r=!0,n.attempt(t).then(o.resolve,o.reject)),s.apply(i,arguments)},i}var n;return n=t("when"),e})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{when:60}],63:[function(e,n){!function(t){"use strict";t(function(){function t(t){var n,r,o,i;for(t||(t={}),n=1,r=arguments.length;r>n;n+=1){o=arguments[n];for(i in o)i in t&&(t[i]===o[i]||i in e&&e[i]===o[i])||(t[i]=o[i])}return t}var e={};return t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],64:[function(e,n){!function(t){"use strict";t(function(){function t(t){return t.toLowerCase().split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("-")}return t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],65:[function(e,n){!function(t){"use strict";t(function(t){function e(t,e){return t.then(function(t){return t&&t[e]},function(t){return c.reject(t&&t[e])})}function n(){return e(this,"entity")}function r(){return e(e(this,"status"),"code")}function o(){return e(this,"headers")}function i(t){return t=f(t),e(this.headers(),t)}function s(t){return t=[].concat(t),u(c.reduce(t,function(t,e){if("string"==typeof e&&(e={rel:e}),"function"!=typeof t.entity.clientFor)throw new Error("Hypermedia response expected");var n=t.entity.clientFor(e.rel);return n({params:e.params})},this))}function u(t){return t.status=r,t.headers=o,t.header=i,t.entity=n,t.follow=s,t}function a(){return u(c.apply(c,arguments))}var c=t("when"),f=t("./normalizeHeaderName");return a.make=u,a.reject=function(t){return u(c.reject(t))},a.promise=function(t){return u(c.promise(t))},a})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./normalizeHeaderName":64,when:60}],66:[function(e,n){!function(t){"use strict";t(function(){function t(t,e){if("string"!=typeof t)throw new Error("String required for URL encoding");return t.split("").map(function(t){if(e.hasOwnProperty(t))return t;var n=t.charCodeAt(0);return 127>=n?"%"+n.toString(16).toUpperCase():encodeURIComponent(t).toUpperCase()}).join("")}function e(e){return e=e||r.unreserved,function(n){return t(n,e)}}function n(t){return decodeURIComponent(t)}var r;return r=function(){var t={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789"};return t.genDelims=":/?#[]@",t.subDelims="!$&'()*+,;=",t.reserved=t.genDelims+t.subDelims,t.unreserved=t.alpha+t.digit+"-._~",t.url=t.reserved+t.unreserved,t.scheme=t.alpha+t.digit+"+-.",t.userinfo=t.unreserved+t.subDelims+":",t.host=t.unreserved+t.subDelims,t.port=t.digit,t.pchar=t.unreserved+t.subDelims+":@",t.segment=t.pchar,t.path=t.segment+"/",t.query=t.pchar+"/?",t.fragment=t.pchar+"/?",Object.keys(t).reduce(function(e,n){return e[n]=t[n].split("").reduce(function(t,e){return t[e]=!0,t},{}),e},{})}(),{decode:n,encode:e(),encodeURL:e(r.url),encodeScheme:e(r.scheme),encodeUserInfo:e(r.userinfo),encodeHost:e(r.host),encodePort:e(r.port),encodePathSegment:e(r.segment),encodePath:e(r.path),encodeQuery:e(r.query),encodeFragment:e(r.fragment)}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],67:[function(e,n){!function(t){"use strict";var e;t(function(t){function n(t,n,r){return n.split(",").reduce(function(n,o){var s,a;if(s={},"*"===o.slice(-1)&&(o=o.slice(0,-1),s.explode=!0),u.test(o)){var c=u.exec(o);o=c[1],s.maxLength=parseInt(c[2])}return o=i.decode(o),a=r[o],a===e||null===a?n:(Array.isArray(a)?n+=a.reduce(function(e,n){return e.length?(e+=s.explode?t.separator:",",t.named&&s.explode&&(e+=t.encoder(o),e+=n.length?"=":t.empty)):(e+=t.first,t.named&&(e+=t.encoder(o),e+=n.length?"=":t.empty)),e+=t.encoder(n)},""):"object"==typeof a?n+=Object.keys(a).reduce(function(e,n){return e.length?e+=s.explode?t.separator:",":(e+=t.first,t.named&&!s.explode&&(e+=t.encoder(o),e+=a[n].length?"=":t.empty)),e+=t.encoder(n),e+=s.explode?"=":",",e+=t.encoder(a[n])},""):(a=String(a),s.maxLength&&(a=a.slice(0,s.maxLength)),n+=n.length?t.separator:t.first,t.named&&(n+=t.encoder(o),n+=a.length?"=":t.empty),n+=t.encoder(a)),n)},"")}function r(t,e){var r;if(r=s[t.slice(0,1)],r?t=t.slice(1):r=s[""],r.reserved)throw new Error("Reserved expression operations are not supported");return n(r,t,e)}function o(t,e){var n,o,i;for(i="",o=0;;){if(n=t.indexOf("{",o),-1===n){i+=t.slice(o);break}i+=t.slice(o,n),o=t.indexOf("}",n)+1,i+=r(t.slice(n+1,o-1),e)}return i}var i,s,u;return i=t("./uriEncoder"),u=/^([^:]*):([0-9]+)$/,s={"":{first:"",separator:",",named:!1,empty:"",encoder:i.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:i.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:i.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:i.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:i.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:i.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:i.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:i.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},{expand:o}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./uriEncoder":66}],68:[function(t,e){function n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}e.exports=n},{}]},{},[9])(9)});