<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MyNeta</title>
  <meta name="description" content="">
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

  <link href="https://www.mapbox.com/base/latest/base.css" rel="stylesheet">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">
  <script src="js/vendor/modernizr-2.8.3.min.js"></script>
  <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="js/vendor/nv.d3.min.js" charset="utf-8"></script>
  <link rel="stylesheet" href="js/vendor/nv.d3.css">
  <style>

  </style>
</head>

<body>
  <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
  <!-- Content -->

  <h1>Neta ji, how do you do?</h1>
  <div id='chart'>
    <svg style="width:800px;  height:500px">
    </svg>
  </div>
  <div id='chart2'>
    <svg style="width:800px;  height:500px">
    </svg>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script>
    // Load data
    d3.csv("data/myneta-loksabha.csv", function(data) {

      var scatterData = [{
        key: "PC_CODE",
        values: []
      }]

      // Parse strings to integers http://learnjsdata.com/read_data.html
      data.forEach(function(d) {
        d['myneta Education Points'] = +d['myneta Education Points']
        d['myneta Total Assets'] = +d['myneta Total Assets'] / 10000000
        d['myneta Criminal Case'] = +d['myneta Criminal Case']

        // Push to the plot dataset http://bl.ocks.org/phil-pedruco/7243857
        scatterData[0].key = d["PC_CODE"];
        scatterData[0].values.push(d)
      });

      // DEBUG
      window.data = scatterData;
      console.log(data[0]);

    });

    // Create scatterChart
    // http://nvd3.org/examples/scatter.html
    nv.addGraph(function() {
      var chart = nv.models.scatterChart()
        .showDistX(true)
        .showDistY(true)
        .duration(100)
        .x(function(d) {
          return d['myneta Education Points'];
        })
        .y(function(d) {
          return d['myneta Total Assets'];
        })
        .pointSize(function(d) {
          return d['myneta Criminal Case'];
        })
        // .color(d3.scale.category20().range());
        .color(d3.scale.category20().range());

      chart.tooltip.contentGenerator(function(obj) {
        console.log(obj);
        return '<h3>Group ' + obj.point.series + '</h3>'
      })

      //Axis settings
      chart.xAxis.tickFormat(d3.format('.02f'));
      chart.yAxis.tickFormat(d3.format('.02f'));


      console.log(data);

      d3.select('#chart svg')
        // .datum(myData)
        .datum(data)
        .call(chart);


      nv.utils.windowResize(chart.update);

      return chart;
    });



    // /**************************************
    //  * Simple test data generator
    //  */
    // function randomData(groups, points) { //# groups,# points per group
    //   var data = [],
    //     shapes = ['circle', 'cross', 'triangle-up', 'triangle-down', 'diamond', 'square'],
    //     random = d3.random.normal();
    //
    //   for (i = 0; i < groups; i++) {
    //     data.push({
    //       key: 'Group ' + i,
    //       values: []
    //     });
    //
    //     for (j = 0; j < points; j++) {
    //       data[i].values.push({
    //         x: random(),
    //         y: random(),
    //         size: Math.random() //Configure the size of each scatter point
    //           ,
    //         shape: (Math.random() > 0.95) ? shapes[j % 6] : "circle" //Configure the shape of each scatter point.
    //       });
    //     }
    //   }
    //
    //   return data;
    // }
  </script>
</body>

</html>
